## 스토리지 엔진 및 MyISAM 스토리지

### 스토리지 엔진이란?

엔진은 서버 엔진과 스토리지 엔진이 존재하는데, 

- ***서버 엔진의 경우 쿼리 요청이 왔을 때 쿼리 파싱을 진행하여 스토리지 엔진에 데이터를 요청하는 작업***을 말하고, 
- ***스토리지 엔진은 물리적 저장장치에서 데이터를 읽어오는 작업***을 말한다.

***스토리지 엔진을 한마디로 표현하면 물리적 저장장치에서 데이터를 CRUD 하는 데 사용하는 기본 컴포턴트이다.*** 

스토리지 엔진은 데이터를 직접적으로 다루는 역할을 하여 엔진의 종류에 따라 동작하는 원리가 다르고 이에 따라, 트랜잭션 및 성능과 같은 주요 사항에도 밀접하게 연관되어 있다.



### MyISAM 스토리지

MyISAM 스토리지는 MySQL 5.5 이전까지는 기본 스토리지 엔진이었다. 하지만 그 이후에는 InnoDB로 대체되었다.

- ***MyISAM은 심플한 구조를 한 스토리지 엔진으로서 데이터 모델 디자인이 단순하다는 장점***을 가지고 있다.
- ***SELECT 작업 속도가 매우 빨라 데이터를 읽는 작업에 매우 적합***하다.
- ***데이터 저장에 제한이 없고 효율적***이다.
- ***B-Tree, R-Tree, Full-Text 인덱스를 지원***한다.
  - B-Tree : 효율적으로 정렬된 키-값 매핑을 의미한다.
  - R-Tree : B-Tree와 비슷하나 다차원의 공간 데이터를 저장하는 색인이다.(Ex. 현재 위치에서 200km 이내의 모든 도시를 찾아라)
  - Full-Text : Full Text Search를 위한 인덱스이다.
    - Ex. 영어에서 단어 index를 찾고자 할 때, LIKE '%index%'로 찾게 되면 모든 행의 문자열을 검색해야 해서 매우 오랜 시간이 걸린다.
    - 이 때, Full Text Index를 사용하게되면, 해당 컬럼의 내용들을 미리 검색하여 a, the, in 같은 검색에 불필요한 단어를 뺀 나머지 단어들을 카탈로그에 저장해두었다가 검색을 진행할 때는 전체를 보는 것이 아닌 카탈로그에서만 검색하게 되는 것이다.
- ***테이블별로 Locking을 설정할 수 있다. 테이블별로 Select이 가능하다.***
- ***테이블 락 사용으로 인해 읽기 성능에는 좋으나 쓰기가 빈번한 경우 성능적으로 불리하다는 단점***도 있다.
- **order by가 붙으면 InnoDB가 더 빠를 수 있다.?**



###  InnoDB 스토리지

***현재 MySQL의 기본 스토리지 엔진이며, MyISAM에 비해 많은 기능을 제공하고 있다.***

- ***InnoDB는 데이터 무결성을 보장해주어 프로그래머가 신경 써주지 않아도 된다.***
- ***Row Level Locking으로 MyISAM보다 동시성에서 우위를 보이고 있다. 따라서 CRUD 작업에 유리하다.***
  - ***Row 별로 스토리지 엔진을 걸어 Row Level Locking이 가능하다.***
- ***트랜잭션을 지원하고 있어, 개발자가 코드 레벨에서 트랜잭션을 설정하는 부담이 적어진다.***
- 장애복구나 외래키 지원 등 다양한 기능을 제공한다.
- ***하지만 이런 많은 기능들을 제공하다 보니 엔진이 무거워 작업 속도가 상대적으로 느린 단점이 있다.***



### MyISAM vs InnoDB

두 스토리지에 대한 ***차이***를 보면,

- ***트랜잭션 처리가 필요하고 대용량 데이터를 다루기 위해서는 InnoDB 스토리지가 효율적이고,*** 

- ***트랜잭션 처리가 필요없고 운영에 Read Only 기능이 많은 서비스일 수록 MyISAM 스토리지가 효율적이다.***

  ~~~
  정리하면,
  SELECT가 많은 서비스   : MyISAM
  데이터 변화가 많은 서비스 : InnoDB 
  ~~~

- ***두 스토리지에 대표적인 차이점은 Locking에 대한 것이다.***

  - MyISAM : Table Locking으로 **Row Level Locking을 지원하지 못하므로** CRUD시 해당 테이블 전체에 Locking이 걸리게 된다.
  - InnoDB : **Row Level Locking을 지원**함으로써, 특정 데이터가 변경, 삭제, 업데이트를 할 때 해당 범위의 Row들을 Locking할 수 있다. *트랜잭션 처리가 필요한 대용량 데이터에 유리한 점이 있다.*



---

